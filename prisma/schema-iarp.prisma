// Schema separato per database IARP (users table)
generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client-iarp"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL_IARP")
}

// Modello per rappresentare la tabella users del FiveM/IARP (ESX Framework)
model GameUser {
  // Identificatore primario - identifier è la vera chiave
  identifier    String    @id @db.VarChar(255) // Steam ID o simile (es: char1:04e9c91f...) - PRIMARY KEY
  
  // Dati anagrafici
  firstname     String?   @db.VarChar(255)
  lastname      String?   @db.VarChar(255)
  dateofbirth   String?   @db.VarChar(255) // Formato: YYYY-MM-DD
  sex           String?   @db.VarChar(1)   // 'm' o 'f'
  height        String?   @db.VarChar(255) // Può essere null
  nationality   String?   @db.VarChar(255) // Es: "Italy"
  // phone_number  String?   @db.VarChar(255) // Commentato - non esiste nel DB reale
  
  // Dati di gioco (JSON)
  accounts      String?   @db.Text         // JSON: {"bank": 23345, "black_money": 0, "money": 8700}
  group         String?   @db.VarChar(255) // "user", "admin", etc
  inventory     String?   @db.LongText     // JSON array degli item nell'inventario
  job           String?   @db.VarChar(255) // Nome lavoro (es: "carabinieri")
  job_grade     Int?                       // Grado lavoro (0, 1, 2, etc)
  job2          String?   @db.VarChar(255) // Secondo lavoro
  job2_grade    Int?                       // Grado secondo lavoro
  loadout       String?   @db.LongText     // JSON array delle armi
  metadata      String?   @db.Text         // JSON: {"lastPlaytime": 1953, "health": 200, "armor": 0, "jobDuty": true}
  position      String?   @db.Text         // JSON: {"x": -266.88, "y": -1046.91, "z": 27.02, "heading": 158.74}
  status        String?   @db.LongText     // JSON array: [{"name": "drunk", "val": 0}, {"name": "hunger", "val": 824200}, ...]
  is_dead       Int?                       // 0 o 1
  
  // Aspetto
  skin          String?   @db.LongText     // JSON complesso con model, components, props, faceFeatures, etc
  tattoos       String?   @db.LongText     // JSON array dei tatuaggi
  
  // Dati aggiuntivi
  immProfilo    String?   @db.Text         // URL immagine profilo Discord
  bankingData   String?   @db.Text         // JSON: {"nameSurname": "Francesco Santillo", "iban": "iarp952724", "pin": 0, "transactions": [...]}
  badge         String?   @db.VarChar(255) // Può essere null
  jail          Int?                       // Tempo in prigione (numero, es: 0)
  
  @@map("users")
  @@index([identifier], map: "index_identifier")
  @@index([firstname], map: "index_firstname")
  @@index([lastname], map: "index_lastname")
}
